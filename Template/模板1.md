---
<%*
  // fix according to your language
  const DEFAULT_FILE_TITLE = '무제 파일' // or Untitled
  
  const DAILY_PATH = '/daily/'
  
  const DAILY_TITLE_KEYWORD = 'daily'
  // fixed tags
  const DAILY_TAGS = ['daily']
  
  let title = tp.file.title
  
  tR += [`TITLE_SLOT`,`DATE_SLOT`,`TAGS_SLOT`].join('\n')
  
  if(title === DEFAULT_FILE_TITLE) {
	title = await tp.system.prompt("Title") ?? DEFAULT_FILE_TITLE
  }
  
  if(title.startsWith(DAILY_TITLE_KEYWORD)) {
	const [fileTitle, tags] = title.split('#')
	// generate your own title
	title = fileTitle + `(${tp.date.now("YYYY-MM-DD")})`;
	
	tR = tR.replace('TAGS_SLOT', `tags: ${DAILY_TAGS.concat(tags?.split(','))}`)
	
	await tp.file.move(DAILY_PATH + title)
  }
  
  tR = tR.replace('TITLE_SLOT', `title: ${title}`)
  tR = tR.replace('DATE_SLOT', `date: ${tp.date.now("YYYY-MM-DD")}`)
  tR = tR.replace('TAGS_SLOT', '')
  
  await tp.file.rename(`${title}`);
%>
---
<%* tp.file.cursor() %>