---
tags:
  - ET
---
```CSharp
public int RpcId;
public readonly Dictionary<int, MessageSenderStruct> requestCallback = new();
public readonly List<MessageInfo> list = new();
```
`RpcId`用于标记发送的`Actor`的`RpcId`，该值是自增的，确保每个`Actor`的`RpcId`不重复。
# 客户端收发消息
客户端的网络消息都是在另一个`NetClient Fiber`上进行的。`ClientSenderComponent`是客户端使用的协议发送组件，挂在`Main Scene`节点上。
```CSharp
[ComponentOf(typeof(Scene))]
public class ClientSenderComponent: Entity, IAwake, IDestroy
{
    public int fiberId;
    public ActorId netClientActorId;
}
```
该组件封装了`Call`和`Send`两个发送协议的方法。
## Call发送Actor消息
```CSharp
public static async ETTask<IResponse> Call(this ProcessInnerSender self,
                                            ActorId actorId,IRequest request,
                                            bool needException = true)
```
`Call`用于有回包的`Actor`消息的发送，并且只能发往同一个进程。使用`MessageQueue`单例对象，将需要发送的消息，添加到队列中去。
基础检查通过后，创建一个`MessageSenderStruct`结构体，放到`requestCallback`字典中，用于等待回包
```CSharp
public ActorId ActorId { get; }
public Type RequestType { get; }
private readonly ETTask<IResponse> tcs;
public bool NeedException { get; }
```

## Send发送Actor消息