---
tags:
  - SeaWar/更新/APK差分合并
---
# 1. 文档目的与适用范围

本文档用于指导在**生产环境**下，将 **ApkDiffPatch** 以 **Android Native Library（.so）** 的形式集成到 **Unity Android 客户端** 中，实现 APK 差分合成更新能力。

## 1.1 适用前提（必须满足）

- 研发团队 **掌握 APK 最终签名权**
- 所有发布 APK 使用 **同一套签名证书**
- 不存在第三方渠道二次签名
- APK 使用 V2/V3 签名（主流场景）
- 客户端允许弹窗安装更新（非静默）

> ⚠️ 若上述任一条件不满足，本方案不可用。

## 1.2 文档结构

| 文档                                   | 内容                         |
| ------------------------------------ | -------------------------- |
| [01_概述与快速开始.md](01_概述与快速开始.md)       | 本文档，技术背景与快速入门              |
| [02_NDK构建指南.md](02_NDK构建指南.md)       | CMakeLists.txt、构建步骤、常见编译问题 |
| [03_Unity集成指南.md](03_Unity集成指南.md)   | .so 文件放置、JNI 调用、ABI 校验     |
| [04_服务端Patch生成.md](04_服务端Patch生成.md) | patch 生成与验证流程              |
| [05_原理与排错.md](05_原理与排错.md)           | 工作原理、失败原因、签名问题             |

---

# 2. ApkDiffPatch 技术本质说明

ApkDiffPatch **不是 SDK，也不是库形态产品**，而是一个：

> **跨平台 C++ 工具型源码工程**

其核心特点：

- 不关心 Android Framework
- 不处理签名
- 不做 zipalign
- 不修改任何 APK 结构语义

客户端的唯一职责：

> 使用【当前设备上真实安装的 APK 字节流】 +【服务器生成的 patch】 → **还原出一个字节级一致的新 APK**

---
# 3. 参考文档

```cardlink
url: https://blog.csdn.net/2301_80171004/article/details/154146296?spm=1001.2101.3001.10752
title: "[HDiffPatch] docs | 基于流的输入输出 | hpatch_TFileStreamInput | read()-CSDN博客"
description: "文章浏览阅读921次，点赞13次，收藏25次。基于流的输入输出是一个强大概念，使HDiffPatch能够高效处理任意大小的文件而不会消耗过多内存通过定义通用的`hpatch_TStreamInput`和`hpatch_TStreamOutput`接口，并提供具体实现如`hpatch_TFileStreamInput`和`hpatch_TFileStreamOutput`，项目构建了灵活的基础架构。> 这种设计意味着其他数据源（如网络连接或内存缓冲区）也可以作为流集成，而无需更改核心差异/补丁逻辑。_hdiffpatch"
host: blog.csdn.net
```

```cardlink
url: https://blog.csdn.net/housisong/category_7529094.html
title: "Diff和Patch_housisong的博客-CSDN博客"
description: "hsynz 同步更新算法的设计和实现 -- 如何将传统同步算法本身提速10倍,HDiffPatch：一个基于字节的流式diff算法,sfpatcher：针对应用商店的apk增量算法,算法,优化,exe"
host: blog.csdn.net
```

---

# 下一步

- 详细构建配置 → [02_NDK构建指南.md](02_NDK构建指南.md)
- Unity 集成 → [03_Unity集成指南.md](03_Unity集成指南.md)
