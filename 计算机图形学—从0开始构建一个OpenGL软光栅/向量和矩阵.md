---
tags:
  - 图形学
  - 软光栅
---
# 向量

## 向量的代码实现

我们将向量声明成模板类。
```Cpp
template<typename T>
class Vector2 {
public:
	T x, y;
	
public:
	Vector2() { x = y = 0 }
	Vector2(T x, T y) :x(x), y(y) {}
	Vector2(const Vector2<T>& v) :x(v.x), y(v.y) {}
	Vector2(const Vector3<T>& v) :x(v.x), y(v.y) {}
	Vector2(const Vector4<T>& v) :x(v.x), y(v.y) {}
};
```
构造函数使用了[[类和对象#^7a819f|成员初始化列表]]。这里Vector2向量是可以通过其他类型向量产生的，所以对Vector2类型向量声明了几个[[类和对象#^f7a712|副本构造器]]。

```Cpp
/*
* 给向量某个元素赋值 e.g v[1]=6
*/
T& operator[](int i) {
	assert(idx >= 0 && idx <= 1);
	if (idx == 0) {
		return x;
	}
	return y;
}

/*
 * 等号运算符重载
 * 返回对象的引用，可以支持连续赋值行为；
 * 参数为常量引用，引用传递可以减少内存开销和提高效率
 */
Vector2<T> operator=(const Vector3<T>& rhs) {
	x = rhs.x;
	y = rhs.y;
	return *this;
}
```
这里的[]重载返回了一个引用，=重载，接受一个引用参数，并且返回自身的引用。

# 矩阵

## 行列式

![[（图解14）矩阵行列式的另一种定义.png|550]]

### 行列式的几何意义

一个矩阵，可以看作多个列（行）向量的组合。只考虑二维跟三维行列式：
- 二维矩阵行列式是列（行）向量张成的平行四边形的`有符号面积`
- 三维矩阵行列式是列（行）向量张成的平行六面体的`有符号体积`
![[（图解15）方阵行列式的几何意义.png]]