---
tags:
  - 数据结构
  - 二叉树
  - 满二叉树
  - 完全二叉树
  - 平衡二叉树
---
# 树的基本属性

1、节点的度与树的度 
	树中一个节点的子节点的个数称为该**节点的度**。  树中节点的最大度数称为**树的度**。

2、如果一棵树有N个节点，那么就会有N-1个链接。除了根节点，每个节点都有一个传入链接(边/箭头)。

3、树的高度和深度
	一个节点的深度就是从根节点到该节点的路径长度，也就是箭头个数。根节点的深度定义为0。
	一个节点的高度就是从该节点到一个叶子节点的最长路径。叶子节点的高度为0。
	树的高度也就是根节点的高度。

# 二叉树

每个节点，最多只能有两个子节点的树。

## 二叉树的性质

性质1：**在二叉树的第i层上至多有$2^{i-1}$个结点（i>=1）。**

性质2：**深度为k的二叉树至多有$2^k-1$个结点（k>=1）。**

性质3：**对于任何一颗二叉树T，如果其终端结点数为$n_{0}$，度为2的结点数为$n_{2}$，则$n_{0}=n_{2}+1$。**
如下图的例子，结点数为10，他是由A,B,C,D等度为2结点，F,G,H,I,J等度为0的叶子结点和E这个度为1的结点组成。总和为4+1+5=10。  
![在这里插入图片描述|420](https://img-blog.csdnimg.cn/20200619174742807.png#pic_center)

性质4：**具有n个节点的完全二叉树深为$\log_{2}{x} + 1$（其中x表示不大于n的最大整数）。**

性质5：如果对一颗有n个结点的完全二叉树（其深度为$\left \lfloor \log_{2}{x} + 1 \right \rfloor$）的结点按层序编号（从第一层到$\left \lfloor \log_{2}{x} + 1 \right \rfloor$层，每层从左到右），对任一结点i（1<=i<=n）:
（1）如果i=1，则结点i是二叉树的根，无双亲，如果i>1,则其双亲结点是结点$\left \lfloor \frac{i}{2} \right \rfloor$
（2）如果2i>n，则结点i无左孩子（结点i为叶子结点）否则左孩子是结点2i。
（3）如果2i+1>n,则结点i无右孩子，否则其右孩子是结点2i+1.

## 满二叉树和完全二叉树

满二叉树：指的是深度为k且含有$2^k-1$个结点的二叉树。
![[（图解4）满二叉树.png|400]]
完全二叉树是由满二叉树而引出来的，若设二叉树的`深度为h`，`除第 h 层外`，`其它各层 (1～h-1) 的结点数都达到最大个数(即1~h-1层为一个满二叉树)`，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。
![[（图解5）完全二叉树.png|520]]

# 平衡二叉树

平衡的概念：结点的平衡因子 = 结点的左子树深度 — 结点的右子树深度。若平衡因子的取值为-1、0或1时**，该节点是**平衡**的，否则是**不平衡**的。

平衡二叉树也叫AVL树，它或者是一颗空树，或者具有以下性质的二叉排序树：它的左子树和左子树的高度之差(平衡因子)的绝对值不超过1，且它的左子树和右子树都是一颗平衡二叉树。

## 旋转

由于平衡因子不平衡，所以引入了旋转的概念，来使得二叉树平衡

### 插入—— 左左型的右旋：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191122102755404.png)

由上图可知：在插入之前树是一颗AVL树，而插入结点之后，T的左右子树高度差的绝对值不再 <= 1，此时AVL树的平衡性被破坏，我们要对其进行旋转。

==在结点T的 **左结点（L）** 的 **左子树（L）** 上做了插入元素的操作，我们称这种情况为 **左左型** ，我们应该进行右旋转。==

**注：** T 表示 平衡因子(bf)大于1的节点。

#### 右旋的具体步骤：

- T向右旋转成为L的右结点
- L的右节点Y 放到 T的左孩子上

旋转中心是根节点T的左节点（L）。

这样即可得到一颗新的AVL树，旋转过程图如下：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191122102924684.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hpYW9qaW4yMWNlbg==,size_16,color_FFFFFF,t_70)

#### 右旋的动画演示：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064308414.gif)

#### 右旋示例：

**示例1：**

左左情况下，插入新数据1 时，进行右旋操作：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064331164.png)

**示例2：**

插入 节点2后，进行右旋转：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064349606.jpeg)

### 插入——左右型的左右旋：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823111508904.png)

由上图可知，我们在T结点的左结点的右子树上插入一个元素时，会使得根为T的树的左右子树高度差的绝对值不再 <= 1，如果只是进行简单的右旋，得到的树仍然是不平衡的。

==在结点T的 **左结点（L）** 的 **右子树（R）** 上做了插入元素的操作，我们称这种情况为 **左右型** ，我们应该进行左右旋。==

**注：** T 表示 平衡因子(bf)大于1的节点。

#### 左右旋的两次旋转步骤：

第1次是左旋转：

- L节点 左旋转，成为R的左节点
- R的左节点（Y1） 左旋转，成为 L的右节点（即左子节点左转）

第2次是右旋转：

- T节点 右旋转，成为R的右节点
- R的右节点（Y2）右旋转，成为T的左节点（即右子节点右转）

旋转中心是根节点 T 的左节点（R）。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191122104309314.png)

#### 左右旋转的示例：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20191122100417493.png)

一定要先把上面的左左型、左右型的旋转搞明白了， 下面的右右型、右左型的旋转就容易理解了。

### 插入——右右型的左旋：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823111022851.png)

由上图可知：在插入之前树是一颗AVL树，而插入新结点之后，T的左右子树高度差的绝对值不再 <+ 1，此时AVL树的平衡性被破坏，我们要对其进行旋转。

==在结点T的 **右结点（R）** 的 **右子树（R）** 上做了插入元素的操作，我们称这种情况为 **右右型** ，我们应该进行左旋转。==

**注：** T 表示 平衡因子(bf)大于1的节点。

#### 左旋的具体步骤：

- T向左旋转成为R的左结点
- R的左节点Y放到T的右孩子上

旋转中心是根节点T的右节点（R）。

这样即可得到一颗新的AVL树，旋转过程图如下：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823111011943.png)

#### 动画演示：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064514413.gif)

#### 左旋举例：

**示例1：**

右右情况下，插入新数据时，左旋操作：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064535581.png)

**示例2：**  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20190728064549810.jpeg)

### 插入——右左型的右左旋：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823114424449.png)

由上图可知，我们在T结点的右结点的左子树上插入一个元素时，会使得根为T的树的左右子树高度差的绝对值不再 < 1，如果只是进行简单的左旋，得到的树仍然是不平衡的。

==在结点T的 **右结点（R）** 的 **左子树（L）** 上做了插入元素的操作，我们称这种情况为 **右左型** ，我们应该进行右左旋。==

**注：** T 表示 平衡因子(bf)大于1的节点。

#### 右左旋的两次旋转步骤：

第1次是右旋转：

- R 节点 右旋转，成为L的右节点
- L的右节点（Y2） 右旋转，成为R的左节点（即右子节点右转）

第2次是左旋转：

- T 节点 左旋转，成为L的左节点
- L的左节点（Y1）左旋转，成为T的右节点 （即左子节点左转）

旋转中心是根节点 T 的右节点（L）。

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823115620684.png)

#### 右左旋的的示例

![在这里插入图片描述](https://img-blog.csdnimg.cn/2019112210022926.png)

### 总结：

在插入的过程中，会出现一下四种情况破坏AVL树的特性，我们可以采取如下相应的旋转。

|插入位置|状态|操作|
|:--|:--|:--|
|在结点T的左结点（L）的 **左子树（L）** 上做了插入元素|左左型|右旋|
|在结点T的左结点（L）的 **右子树（R）** 上做了插入元素|左右型|左右旋|
|在结点T的右结点（R）的 **右子树（R）** 上做了插入元素|右右型|左旋|
|在结点T的右结点（R）的 **左子树（L）** 上做了插入元素|右左型|右左旋|

**注意：**  
T 表示 平衡因子(bf)大于1的节点。

  

不知道大家发现规律没，这个规则还是挺好记，下面来个图示：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190823133444314.png)


# 红黑树

[Red/Black Tree Visualization (usfca.edu)](https://www.cs.usfca.edu/~galles/visualization/RedBlack.html)

首先，红黑树是一个二叉搜索树，它在每个节点增加了一个存储位记录节点的颜色，可以是RED，也可以是BLACK；通过任意一条从根到叶子简单路径上颜色的约束，红黑树保证最长路径不超过最短路径的二倍，因而近似平衡（最短路径就是全黑节点，最长路径就是一个红节点一个黑节点，当从根节点到叶子节点的路径上黑色节点相同时，最长路径刚好是最短路径的两倍）。

一棵合法的红黑树必须遵循以下四条性质：

1. 节点为红色或黑色
2. NIL 节点（空叶子节点）为黑色
3. 红色节点的子节点为黑色
	1. 红色节点的父节点都是黑色
	2. 从根节点到叶子节点的所有路径上不能有 2 个连续的红色节点
5. 从根节点到 NIL 节点的每条路径上的黑色节点数量相同

下图为一棵合法的红黑树：
![rbtree-example](https://oi-wiki.org/ds/images/rbtree-example.svg)