<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background: transparent; background-color: transparent; color-scheme: light dark;" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1365px" height="1635px" viewBox="0 0 1365 1635" content="&lt;mxfile host=&quot;app.diagrams.net&quot; agent=&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36&quot; version=&quot;29.4.0&quot;&gt;&#10;  &lt;diagram name=&quot;第 1 页&quot; id=&quot;N8AeDfeDVwQGeaXrqPWF&quot;&gt;&#10;    &lt;mxGraphModel dx=&quot;1152&quot; dy=&quot;795&quot; grid=&quot;1&quot; gridSize=&quot;10&quot; guides=&quot;1&quot; tooltips=&quot;1&quot; connect=&quot;1&quot; arrows=&quot;1&quot; fold=&quot;1&quot; page=&quot;1&quot; pageScale=&quot;1&quot; pageWidth=&quot;827&quot; pageHeight=&quot;1169&quot; math=&quot;0&quot; shadow=&quot;0&quot;&gt;&#10;      &lt;root&gt;&#10;        &lt;mxCell id=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;1&quot; parent=&quot;0&quot; /&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-1&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;客户端&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;150&quot; x=&quot;20&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;Gate Fiber&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;150&quot; x=&quot;234&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;MessageLocationSender&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;202&quot; x=&quot;434&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;Location Fiber&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;150&quot; x=&quot;771&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;Map Fiber A&amp;#xa;(旧位置)&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;150&quot; x=&quot;1018&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; parent=&quot;1&quot; style=&quot;shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;container=1;dropTarget=0;collapsible=0;recursiveResize=0;outlineConnect=0;portConstraint=eastwest;newEdgeStyle={&amp;quot;edgeStyle&amp;quot;:&amp;quot;elbowEdgeStyle&amp;quot;,&amp;quot;elbow&amp;quot;:&amp;quot;vertical&amp;quot;,&amp;quot;curved&amp;quot;:0,&amp;quot;rounded&amp;quot;:0};size=65;&quot; value=&quot;Map Fiber B&amp;#xa;(新位置)&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;1634&quot; width=&quot;150&quot; x=&quot;1220&quot; y=&quot;20&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-7&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-1&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; value=&quot;发送消息给玩家Unit&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;211&quot; y=&quot;179&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-8&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;Call(unitId, msg)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;431&quot; y=&quot;235&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-9&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; value=&quot;Get(unitId)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;699&quot; y=&quot;291&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-10&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;ActorId = MapA:instanceId&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;702&quot; y=&quot;347&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-11&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; value=&quot;转发消息&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;823&quot; y=&quot;399&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-12&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;Response&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;826&quot; y=&quot;455&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-13&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; value=&quot;Response&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;434&quot; y=&quot;511&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-14&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-1&quot; value=&quot;Response&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;214&quot; y=&quot;567&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-15&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; value=&quot;Lock(unitId, oldActorId)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;981&quot; y=&quot;671&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-16&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; value=&quot;传送Unit数据&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;1202&quot; y=&quot;775&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-17&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; style=&quot;curved=1;endArrow=block;rounded=0;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; value=&quot;创建新Unit实体&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;1346&quot; y=&quot;831&quot; /&gt;&#10;              &lt;mxPoint x=&quot;1346&quot; y=&quot;861&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-18&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; value=&quot;UnLock(unitId, oldActorId, newActorId)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;1082&quot; y=&quot;917&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-19&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-1&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; value=&quot;发送消息给玩家Unit&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;211&quot; y=&quot;1069&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-20&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-2&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;Call(unitId, msg)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;431&quot; y=&quot;1125&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-21&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; value=&quot;转发到缓存的旧地址&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;823&quot; y=&quot;1177&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-22&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-5&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;ERR_NotFoundActor&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;826&quot; y=&quot;1233&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-23&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; value=&quot;Get(unitId)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;699&quot; y=&quot;1337&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-24&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-4&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;新ActorId = MapB:newInstanceId&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;702&quot; y=&quot;1441&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-25&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; value=&quot;重新转发消息&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;923&quot; y=&quot;1493&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-26&quot; edge=&quot;1&quot; parent=&quot;1&quot; source=&quot;hJJvQMYo9uxaxowNPYHG-6&quot; style=&quot;verticalAlign=bottom;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;dashed=1;dashPattern=2 3;endArrow=block;&quot; target=&quot;hJJvQMYo9uxaxowNPYHG-3&quot; value=&quot;Response (成功!)&quot;&gt;&#10;          &lt;mxGeometry relative=&quot;1&quot; as=&quot;geometry&quot;&gt;&#10;            &lt;Array as=&quot;points&quot;&gt;&#10;              &lt;mxPoint x=&quot;926&quot; y=&quot;1549&quot; /&gt;&#10;            &lt;/Array&gt;&#10;          &lt;/mxGeometry&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-27&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;=== 阶段1: 正常通信 ===&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;1250&quot; x=&quot;70&quot; y=&quot;95&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-28&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;=== 阶段2: 玩家开始跨场景迁移 ===&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;1250&quot; x=&quot;70&quot; y=&quot;587&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-29&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;加协程锁,后续Get请求排队&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;210&quot; x=&quot;741&quot; y=&quot;691&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-30&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;更新位置映射,释放锁&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;168&quot; x=&quot;762&quot; y=&quot;937&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-31&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;=== 阶段3: 迁移期间消息自动重试 ===&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;1250&quot; x=&quot;70&quot; y=&quot;985&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-32&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;等待500ms, 清除缓存&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;202&quot; x=&quot;434&quot; y=&quot;1253&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;        &lt;mxCell id=&quot;hJJvQMYo9uxaxowNPYHG-33&quot; parent=&quot;1&quot; style=&quot;fillColor=#ffff88;strokeColor=#9E916F;&quot; value=&quot;若仍在Lock中则排队等待&quot; vertex=&quot;1&quot;&gt;&#10;          &lt;mxGeometry height=&quot;48&quot; width=&quot;199&quot; x=&quot;747&quot; y=&quot;1357&quot; as=&quot;geometry&quot; /&gt;&#10;        &lt;/mxCell&gt;&#10;      &lt;/root&gt;&#10;    &lt;/mxGraphModel&gt;&#10;  &lt;/diagram&gt;&#10;&lt;/mxfile&gt;&#10;"><defs/><g><g data-cell-id="0"><g data-cell-id="1"><g data-cell-id="hJJvQMYo9uxaxowNPYHG-1"><g transform="translate(0.5,0.5)"><rect x="0" y="0" width="150" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 75 65 L 75 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 33px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">客户端</div></div></div></foreignObject><text x="75" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">客户端</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-2"><g transform="translate(0.5,0.5)"><rect x="214" y="0" width="150" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 289 65 L 289 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 33px; margin-left: 215px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Gate Fiber</div></div></div></foreignObject><text x="289" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">Gate Fiber</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-3"><g transform="translate(0.5,0.5)"><rect x="414" y="0" width="202" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515 65 L 515 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 200px; height: 1px; padding-top: 33px; margin-left: 415px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">MessageLocationSender</div></div></div></foreignObject><text x="515" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">MessageLocationSender</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-4"><g transform="translate(0.5,0.5)"><rect x="751" y="0" width="150" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 826 65 L 826 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 33px; margin-left: 752px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Location Fiber</div></div></div></foreignObject><text x="826" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">Location Fiber</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-5"><g transform="translate(0.5,0.5)"><rect x="998" y="0" width="150" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1073 65 L 1073 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 33px; margin-left: 999px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Map Fiber A<br />(旧位置)</div></div></div></foreignObject><text x="1073" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">Map Fiber A...</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-6"><g transform="translate(0.5,0.5)"><rect x="1200" y="0" width="150" height="65" fill="#ffffff" stroke="#000000" pointer-events="all" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1275 65 L 1275 1634" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 33px; margin-left: 1201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; color: #000000; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: light-dark(#000000, #ffffff); line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">Map Fiber B<br />(新位置)</div></div></div></foreignObject><text x="1275" y="36" fill="light-dark(#000000, #ffffff)" font-family="Helvetica" font-size="12px" text-anchor="middle">Map Fiber B...</text></switch></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-7"><g transform="translate(0.5,0.5)"><path d="M 74.5 159 L 191 159 L 280.38 159" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 287.38 159 L 280.38 162.5 L 280.38 155.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="133" y="144" width="99" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="181.5" y="154">发送消息给玩家Unit</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-8"><g transform="translate(0.5,0.5)"><path d="M 288.5 215 L 411 215 L 506.38 215" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 513.38 215 L 506.38 218.5 L 506.38 211.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="361" y="200" width="82" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="401.5" y="210">Call(unitId, msg)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-9"><g transform="translate(0.5,0.5)"><path d="M 514.5 271 L 679 271 L 817.38 271" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 824.38 271 L 817.38 274.5 L 817.38 267.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="644" y="256" width="54" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="670.5" y="266">Get(unitId)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-10"><g transform="translate(0.5,0.5)"><path d="M 825.5 327 L 682 327 L 522.62 327" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515.62 327 L 522.62 323.5 L 522.62 330.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="605" y="312" width="131" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="669.5" y="322">ActorId = MapA:instanceId</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-11"><g transform="translate(0.5,0.5)"><path d="M 514.5 379 L 803 379 L 1064.38 379" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1071.38 379 L 1064.38 382.5 L 1064.38 375.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="771" y="364" width="46" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="793.5" y="374">转发消息</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-12"><g transform="translate(0.5,0.5)"><path d="M 1072.5 435 L 806 435 L 522.62 435" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515.62 435 L 522.62 431.5 L 522.62 438.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="768" y="420" width="52" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="793.5" y="430">Response</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-13"><g transform="translate(0.5,0.5)"><path d="M 514.5 817 L 296.62 817" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 289.62 817 L 296.62 813.5 L 296.62 820.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="376" y="802" width="52" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="401.5" y="812">Response</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-14"><g transform="translate(0.5,0.5)"><path d="M 288.5 547 L 194 547 L 82.62 547" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 75.62 547 L 82.62 543.5 L 82.62 550.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="156" y="532" width="52" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="181.5" y="542">Response</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-15"><g transform="translate(0.5,0.5)"><path d="M 1072.5 651 L 961 651 L 833.62 651" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 826.62 651 L 833.62 647.5 L 833.62 654.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="892" y="636" width="115" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="948.5" y="646">Lock(unitId, oldActorId)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-16"><g transform="translate(0.5,0.5)"><path d="M 1072.5 755 L 1182 755 L 1266.38 755" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1273.38 755 L 1266.38 758.5 L 1266.38 751.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="1141" y="740" width="66" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="1173.5" y="750">传送Unit数据</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-17"><g transform="translate(0.5,0.5)"><path d="M 1274.5 811 Q 1326 811 1326 826 Q 1326 841 1282.62 841" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1275.62 841 L 1282.62 837.5 L 1282.62 844.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="1288" y="821" width="77" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="1326" y="831">创建新Unit实体</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-18"><g transform="translate(0.5,0.5)"><path d="M 1274.5 897 L 1062 897 L 833.62 897" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 826.62 897 L 833.62 893.5 L 833.62 900.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="955" y="882" width="190" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="1049.5" y="892">UnLock(unitId, oldActorId, newActorId)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-19"><g transform="translate(0.5,0.5)"><path d="M 74.5 1049 L 191 1049 L 280.38 1049" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 287.38 1049 L 280.38 1052.5 L 280.38 1045.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="133" y="1034" width="99" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="181.5" y="1044">发送消息给玩家Unit</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-20"><g transform="translate(0.5,0.5)"><path d="M 288.5 1105 L 411 1105 L 506.38 1105" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 513.38 1105 L 506.38 1108.5 L 506.38 1101.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="361" y="1090" width="82" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="401.5" y="1100">Call(unitId, msg)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-21"><g transform="translate(0.5,0.5)"><path d="M 514.5 1157 L 803 1157 L 1064.38 1157" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1071.38 1157 L 1064.38 1160.5 L 1064.38 1153.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="744" y="1142" width="101" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="793.5" y="1152">转发到缓存的旧地址</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-22"><g transform="translate(0.5,0.5)"><path d="M 1072.5 1213 L 806 1213 L 522.62 1213" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515.62 1213 L 522.62 1209.5 L 522.62 1216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="742" y="1198" width="105" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="793.5" y="1208">ERR_NotFoundActor</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-23"><g transform="translate(0.5,0.5)"><path d="M 514.5 1317 L 679 1317 L 817.38 1317" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 824.38 1317 L 817.38 1320.5 L 817.38 1313.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="644" y="1302" width="54" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="670.5" y="1312">Get(unitId)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-24"><g transform="translate(0.5,0.5)"><path d="M 825.5 1421 L 682 1421 L 522.62 1421" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515.62 1421 L 522.62 1417.5 L 522.62 1424.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="589" y="1406" width="163" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="669.5" y="1416">新ActorId = MapB:newInstanceId</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-25"><g transform="translate(0.5,0.5)"><path d="M 514.5 1473 L 903 1473 L 1266.38 1473" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 1273.38 1473 L 1266.38 1476.5 L 1266.38 1469.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="861" y="1458" width="68" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="894.5" y="1468">重新转发消息</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-26"><g transform="translate(0.5,0.5)"><path d="M 1274.5 1529 L 906 1529 L 522.62 1529" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="2 3" pointer-events="stroke" style="stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/><path d="M 515.62 1529 L 522.62 1525.5 L 522.62 1532.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255)); stroke: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><rect fill="#ffffff" stroke="none" x="852" y="1514" width="87" height="14" stroke-width="0" style="fill: light-dark(#ffffff, var(--ge-dark-color, #121212));"/><text x="894.5" y="1524">Response (成功!)</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-27"><g transform="translate(0.5,0.5)"><rect x="50" y="75" width="1250" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="675" y="104">=== 阶段1: 正常通信 ===</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-28"><g transform="translate(0.5,0.5)"><rect x="50" y="567" width="1250" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="675" y="596">=== 阶段2: 玩家开始跨场景迁移 ===</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-29"><g transform="translate(0.5,0.5)"><rect x="721" y="671" width="210" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="826" y="700">加协程锁,后续Get请求排队</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-30"><g transform="translate(0.5,0.5)"><rect x="742" y="917" width="168" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="826" y="946">更新位置映射,释放锁</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-31"><g transform="translate(0.5,0.5)"><rect x="50" y="965" width="1250" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="675" y="994">=== 阶段3: 迁移期间消息自动重试 ===</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-32"><g transform="translate(0.5,0.5)"><rect x="414" y="1233" width="202" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="515" y="1262">等待500ms, 清除缓存</text></g></g></g><g data-cell-id="hJJvQMYo9uxaxowNPYHG-33"><g transform="translate(0.5,0.5)"><rect x="727" y="1337" width="199" height="48" fill="#ffff88" stroke="#9e916f" pointer-events="all" style="fill: light-dark(rgb(255, 255, 136), rgb(33, 33, 0)); stroke: light-dark(rgb(158, 145, 111), rgb(123, 112, 82));"/></g><g><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="12px" style="fill: light-dark(rgb(0, 0, 0), rgb(255, 255, 255));"><text x="826.5" y="1366">若仍在Lock中则排队等待</text></g></g></g></g></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>